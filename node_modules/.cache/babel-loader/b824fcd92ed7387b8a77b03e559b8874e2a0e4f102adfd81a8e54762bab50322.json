{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\super\\\\OneDrive\\\\Desktop\\\\React progams\\\\who got who\\\\src\\\\components\\\\VotingBanner.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useGame } from '../context/GameContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function VotingBanner({\n  dispute\n}) {\n  _s();\n  const {\n    voteOnDispute,\n    state\n  } = useGame();\n  const [timeLeft, setTimeLeft] = useState(0);\n  const [hasVoted, setHasVoted] = useState(false);\n  const currentPlayer = state.currentPlayer;\n  useEffect(() => {\n    // Check if current player has already voted\n    const existingVote = dispute.votes.find(v => v.voterId === (currentPlayer === null || currentPlayer === void 0 ? void 0 : currentPlayer.id));\n    setHasVoted(!!existingVote);\n  }, [dispute.votes, currentPlayer === null || currentPlayer === void 0 ? void 0 : currentPlayer.id]);\n  useEffect(() => {\n    const updateTimer = () => {\n      const now = new Date().getTime();\n      const closeTime = new Date(dispute.closesAt).getTime();\n      const remaining = Math.max(0, Math.ceil((closeTime - now) / 1000));\n      setTimeLeft(remaining);\n    };\n    updateTimer();\n    const interval = setInterval(updateTimer, 1000);\n    return () => clearInterval(interval);\n  }, [dispute.closesAt]);\n  const handleVote = async vote => {\n    await voteOnDispute(dispute.id, vote);\n    setHasVoted(true);\n  };\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n  const getVoteCounts = () => {\n    const uphold = dispute.votes.filter(v => v.vote === true).length;\n    const fail = dispute.votes.filter(v => v.vote === false).length;\n    return {\n      uphold,\n      fail\n    };\n  };\n  if (timeLeft === 0) {\n    return null; // Hide banner when voting is over\n  }\n  const {\n    uphold,\n    fail\n  } = getVoteCounts();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    style: {\n      backgroundColor: '#ffc107',\n      color: '#000',\n      margin: '1rem 0',\n      border: '2px solid #f0ad4e'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-between\",\n      style: {\n        marginBottom: '0.5rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u2696\\uFE0F Vote on Dispute\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"timer\",\n        style: {\n          backgroundColor: '#000',\n          color: '#ffc107'\n        },\n        children: formatTime(timeLeft)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        marginBottom: '1rem'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"A player is disputing a Gotcha claim. Vote to resolve!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), dispute.description && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: '0.5rem 0',\n        padding: '0.5rem',\n        backgroundColor: '#fff',\n        borderRadius: '4px',\n        fontSize: '0.9rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Dispute reason:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this), \" \\\"\", dispute.description, \"\\\"\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-small\",\n      style: {\n        marginBottom: '1rem'\n      },\n      children: [\"Current votes: \", uphold, \" uphold, \", fail, \" fail\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), !hasVoted ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-1\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-success\",\n        onClick: () => handleVote(true),\n        disabled: state.isLoading,\n        style: {\n          color: '#fff'\n        },\n        children: \"\\u2705 Uphold Gotcha\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-danger\",\n        onClick: () => handleVote(false),\n        disabled: state.isLoading,\n        style: {\n          color: '#fff'\n        },\n        children: \"\\u274C Fail Gotcha\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center\",\n      style: {\n        padding: '0.5rem',\n        backgroundColor: '#28a745',\n        color: '#fff',\n        borderRadius: '4px'\n      },\n      children: \"\\u2705 You've voted! Waiting for others...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-small\",\n      style: {\n        marginTop: '0.5rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Vote wisely:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), \" Uphold if the claimer said \\\"Gotcha!\\\" first, fail if the target caught them before they could say it.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n}\n_s(VotingBanner, \"i0wYF4HmcI2DZAL3Wrik2jFWABU=\", false, function () {\n  return [useGame];\n});\n_c = VotingBanner;\nvar _c;\n$RefreshReg$(_c, \"VotingBanner\");","map":{"version":3,"names":["React","useState","useEffect","useGame","jsxDEV","_jsxDEV","VotingBanner","dispute","_s","voteOnDispute","state","timeLeft","setTimeLeft","hasVoted","setHasVoted","currentPlayer","existingVote","votes","find","v","voterId","id","updateTimer","now","Date","getTime","closeTime","closesAt","remaining","Math","max","ceil","interval","setInterval","clearInterval","handleVote","vote","formatTime","seconds","mins","floor","secs","toString","padStart","getVoteCounts","uphold","filter","length","fail","className","style","backgroundColor","color","margin","border","children","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","description","padding","borderRadius","fontSize","onClick","disabled","isLoading","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/super/OneDrive/Desktop/React progams/who got who/src/components/VotingBanner.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useGame } from '../context/GameContext';\r\nimport { Dispute } from '../types';\r\n\r\ninterface VotingBannerProps {\r\n  dispute: Dispute;\r\n}\r\n\r\nexport default function VotingBanner({ dispute }: VotingBannerProps) {\r\n  const { voteOnDispute, state } = useGame();\r\n  const [timeLeft, setTimeLeft] = useState(0);\r\n  const [hasVoted, setHasVoted] = useState(false);\r\n\r\n  const currentPlayer = state.currentPlayer;\r\n\r\n  useEffect(() => {\r\n    // Check if current player has already voted\r\n    const existingVote = dispute.votes.find(v => v.voterId === currentPlayer?.id);\r\n    setHasVoted(!!existingVote);\r\n  }, [dispute.votes, currentPlayer?.id]);\r\n\r\n  useEffect(() => {\r\n    const updateTimer = () => {\r\n      const now = new Date().getTime();\r\n      const closeTime = new Date(dispute.closesAt).getTime();\r\n      const remaining = Math.max(0, Math.ceil((closeTime - now) / 1000));\r\n      setTimeLeft(remaining);\r\n    };\r\n\r\n    updateTimer();\r\n    const interval = setInterval(updateTimer, 1000);\r\n    \r\n    return () => clearInterval(interval);\r\n  }, [dispute.closesAt]);\r\n\r\n  const handleVote = async (vote: boolean) => {\r\n    await voteOnDispute(dispute.id, vote);\r\n    setHasVoted(true);\r\n  };\r\n\r\n  const formatTime = (seconds: number) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const getVoteCounts = () => {\r\n    const uphold = dispute.votes.filter(v => v.vote === true).length;\r\n    const fail = dispute.votes.filter(v => v.vote === false).length;\r\n    return { uphold, fail };\r\n  };\r\n\r\n  if (timeLeft === 0) {\r\n    return null; // Hide banner when voting is over\r\n  }\r\n\r\n  const { uphold, fail } = getVoteCounts();\r\n\r\n  return (\r\n    <div className=\"card\" style={{ \r\n      backgroundColor: '#ffc107', \r\n      color: '#000', \r\n      margin: '1rem 0',\r\n      border: '2px solid #f0ad4e'\r\n    }}>\r\n      <div className=\"flex flex-between\" style={{ marginBottom: '0.5rem' }}>\r\n        <h3>⚖️ Vote on Dispute</h3>\r\n        <div className=\"timer\" style={{ backgroundColor: '#000', color: '#ffc107' }}>\r\n          {formatTime(timeLeft)}\r\n        </div>\r\n      </div>\r\n      \r\n      <p style={{ marginBottom: '1rem' }}>\r\n        <strong>A player is disputing a Gotcha claim. Vote to resolve!</strong>\r\n      </p>\r\n      \r\n      {dispute.description && (\r\n        <div style={{ \r\n          margin: '0.5rem 0', \r\n          padding: '0.5rem', \r\n          backgroundColor: '#fff', \r\n          borderRadius: '4px',\r\n          fontSize: '0.9rem'\r\n        }}>\r\n          <strong>Dispute reason:</strong> \"{dispute.description}\"\r\n        </div>\r\n      )}\r\n      \r\n      <div className=\"text-small\" style={{ marginBottom: '1rem' }}>\r\n        Current votes: {uphold} uphold, {fail} fail\r\n      </div>\r\n      \r\n      {!hasVoted ? (\r\n        <div className=\"flex gap-1\">\r\n          <button\r\n            className=\"btn btn-success\"\r\n            onClick={() => handleVote(true)}\r\n            disabled={state.isLoading}\r\n            style={{ color: '#fff' }}\r\n          >\r\n            ✅ Uphold Gotcha\r\n          </button>\r\n          <button\r\n            className=\"btn btn-danger\"\r\n            onClick={() => handleVote(false)}\r\n            disabled={state.isLoading}\r\n            style={{ color: '#fff' }}\r\n          >\r\n            ❌ Fail Gotcha\r\n          </button>\r\n        </div>\r\n      ) : (\r\n        <div className=\"text-center\" style={{ \r\n          padding: '0.5rem', \r\n          backgroundColor: '#28a745', \r\n          color: '#fff', \r\n          borderRadius: '4px' \r\n        }}>\r\n          ✅ You've voted! Waiting for others...\r\n        </div>\r\n      )}\r\n      \r\n      <div className=\"text-small\" style={{ marginTop: '0.5rem' }}>\r\n        <strong>Vote wisely:</strong> Uphold if the claimer said \"Gotcha!\" first, \r\n        fail if the target caught them before they could say it.\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}